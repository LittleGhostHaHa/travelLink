<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·¯çº¿åœ°å›¾é¢„è§ˆ</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        .map-container {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
        }
        .header {
            padding: 20px;
            text-align: center;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }
        h1 {
            margin: 0;
            color: #333;
        }
    </style>
    <!-- é«˜å¾·åœ°å›¾API -->
    <script src="https://webapi.amap.com/maps?v=2.0&key=7bd4febada1198edcc6fefc1b9c308a1"></script>
</head>
<body>
    <div class="header">
        <h1>å¦é—¨é›†ç¾æ–‡åˆ›å›­åŠå‘¨è¾¹è·¯çº¿åœ°å›¾é¢„è§ˆ</h1>
    </div>
    <div class="map-container">
        <div id="map" style="width: 100%; height: 100%;"></div>
    </div>

    <script>
        // ç¡®ä¿DOMåŠ è½½å®Œæˆä¸”é«˜å¾·åœ°å›¾APIå¯ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥AMapæ˜¯å¦å·²åŠ è½½
            if (typeof AMap === 'undefined') {
                console.error('é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥');
                alert('é«˜å¾·åœ°å›¾APIåŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                return;
            }
            
            // åˆå§‹åŒ–åœ°å›¾
            const map = new AMap.Map('map', {
                zoom: 15,
                center: [118.095, 24.568],
                viewMode: '3D',
                buildingAnimation: true,
                resizeEnable: true
            });
            
            // æ·»åŠ æ§ä»¶
            map.addControl(new AMap.ToolBar());
            map.addControl(new AMap.Scale());
            
            // å®šä¹‰æ™¯ç‚¹åæ ‡
            const locations = [
                {name: 'é›†ç¾é›†å½±è§†æ–‡åˆ›å›­', location: [118.098497, 24.580102], icon: 'ğŸ“'},
                {name: 'é›†ç¾å­¦æ‘', location: [118.092832, 24.566280], icon: 'ğŸ«'},
                {name: 'å¤§ç¤¾', location: [118.087921, 24.565843], icon: 'ğŸ˜ï¸'}
            ];
            
            // æ·»åŠ æ™¯ç‚¹æ ‡è®°
            locations.forEach((item) => {
                const marker = new AMap.Marker({
                    position: item.location,
                    title: item.name,
                    icon: new AMap.Icon({
                        size: new AMap.Size(36, 36),
                        imageSize: new AMap.Size(36, 36),
                        content: `<div style="font-size: 24px; text-align: center;">${item.icon}</div>`
                    }),
                    map: map
                });
                
                // æ·»åŠ ä¿¡æ¯çª—å£
                const infoWindow = new AMap.InfoWindow({
                    content: `<div style="padding: 10px;"><h3 style="margin: 0;">${item.icon} ${item.name}</h3></div>`,
                    offset: new AMap.Pixel(0, -30)
                });
                
                marker.on('click', function() {
                    infoWindow.open(map, marker.getPosition());
                });
            });
            
            // å®šä¹‰è·¯çº¿åæ ‡
            const routePath = [
                new AMap.LngLat(118.098497, 24.580102), // é›†ç¾é›†å½±è§†æ–‡åˆ›å›­ï¼ˆèµ·ç‚¹ï¼‰
                new AMap.LngLat(118.092832, 24.566280), // é›†ç¾å­¦æ‘
                new AMap.LngLat(118.087921, 24.565843), // å¤§ç¤¾
                new AMap.LngLat(118.098497, 24.580102)  // è¿”å›æ–‡åˆ›å›­ï¼ˆç»ˆç‚¹ï¼‰
            ];
            
            // ç»˜åˆ¶è·¯çº¿
            const polyline = new AMap.Polyline({
                path: routePath,
                strokeColor: '#1890ff',
                strokeWeight: 6,
                strokeOpacity: 0.8,
                strokeStyle: 'solid',
                zIndex: 100
            });
            
            // æ·»åŠ è·¯çº¿åˆ°åœ°å›¾
            polyline.setMap(map);
            
            // æ·»åŠ èµ·ç‚¹æ ‡è®°
            const startMarker = new AMap.Marker({
                position: [118.098497, 24.580102],
                icon: new AMap.Icon({
                    size: new AMap.Size(40, 40),
                    imageSize: new AMap.Size(40, 40),
                    content: '<div style="background-color: #52c41a; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">èµ·</div>'
                }),
                zIndex: 200,
                map: map
            });
            
            // æ·»åŠ è·¯çº¿æ­¥éª¤æ ‡è®°
            const waypoints = [
                {position: [118.098497, 24.580102], label: '1', title: 'èµ·ç‚¹: é›†ç¾é›†å½±è§†æ–‡åˆ›å›­'},
                {position: [118.092832, 24.566280], label: '2', title: 'é›†ç¾å­¦æ‘'},
                {position: [118.087921, 24.565843], label: '3', title: 'å¤§ç¤¾'}
            ];
            
            waypoints.forEach((point) => {
                new AMap.Marker({
                    position: point.position,
                    icon: new AMap.Icon({
                        size: new AMap.Size(30, 30),
                        imageSize: new AMap.Size(30, 30),
                        content: `<div style="background-color: #1890ff; border: 2px solid white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; box-shadow: 0 2px 6px rgba(0,0,0,0.3);">${point.label}</div>`
                    }),
                    title: point.title,
                    zIndex: 150,
                    map: map
                });
            });
            
            // è°ƒæ•´è§†é‡
            const bounds = new AMap.Bounds();
            routePath.forEach(point => bounds.extend(point));
            map.setBounds(bounds, false, [50, 50, 50, 50]);
            
            // æ·»åŠ è·¯çº¿å›¾ä¾‹
            const legend = document.createElement('div');
            legend.style.position = 'absolute';
            legend.style.bottom = '20px';
            legend.style.right = '20px';
            legend.style.backgroundColor = 'white';
            legend.style.padding = '10px';
            legend.style.borderRadius = '5px';
            legend.style.boxShadow = '0 2px 6px rgba(0,0,0,0.3)';
            legend.style.zIndex = '1000';
            legend.style.fontSize = '12px';
            legend.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 5px;">
                    <div style="background-color: #1890ff; width: 20px; height: 3px; margin-right: 5px;"></div>
                    <span>æ¸¸è§ˆè·¯çº¿</span>
                </div>
                <div style="display: flex; align-items: center; margin-bottom: 5px;">
                    <div style="background-color: #52c41a; width: 15px; height: 15px; border-radius: 50%; margin-right: 5px;"></div>
                    <span>èµ·ç‚¹</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <div style="background-color: #1890ff; width: 15px; height: 15px; border-radius: 50%; margin-right: 5px;"></div>
                    <span>æ¸¸è§ˆç‚¹</span>
                </div>
            `;
            document.getElementById('map').appendChild(legend);
            
            console.log('åœ°å›¾åˆå§‹åŒ–å®Œæˆï¼Œè·¯çº¿å·²æ˜¾ç¤º');
        });
    </script>
</body>
</html>